<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeXus - Canales en Vivo</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Roboto', sans-serif;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        :root {
            --primary: #141414;
            --secondary: #1a1a1a;
            --accent: #e50914;
            --accent-hover: #f40612;
            --text: #ffffff;
            --text-secondary: #b3b3b3;
            --card-bg: #1e1e1e;
            --shadow: 10px 10px 20px rgba(0, 0, 0, 0.5),
                      -5px -5px 15px rgba(255, 255, 255, 0.05);
            --inner-shadow: inset 3px 3px 5px rgba(0, 0, 0, 0.3),
                           inset -2px -2px 4px rgba(255, 255, 255, 0.05);
        }

        body {
            background-color: var(--primary);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
            background: linear-gradient(135deg, #0f0f0f 0%, #1a1a1a 100%);
        }

        /* Pantalla de carga con animación del logo */
        .loader-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0f0f0f 0%, #1a1a1a 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease-out;
        }

        .logo-animation {
            display: flex;
            align-items: center;
            gap: 0;
        }

        .logo-animation .initial {
            font-size: 5rem;
            font-weight: 700;
            color: var(--accent);
            text-shadow: 0 0 15px rgba(229, 9, 20, 0.8);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .logo-animation .rest {
            font-size: 5rem;
            font-weight: 700;
            color: var(--text);
            opacity: 0;
            animation: fadeIn 0.5s forwards;
            animation-delay: 0.5s;
        }

        .logo-animation .rest span {
            opacity: 0;
            animation: fadeIn 0.5s forwards;
        }

        .logo-animation .rest span:nth-child(1) { animation-delay: 0.7s; }
        .logo-animation .rest span:nth-child(2) { animation-delay: 0.9s; }
        .logo-animation .rest span:nth-child(3) { animation-delay: 1.1s; }
        .logo-animation .rest span:nth-child(4) { animation-delay: 1.3s; }

        @keyframes fadeIn {
            to { opacity: 1; }
        }

        /* Header estilo Netflix con neomorfismo */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.2rem 4%;
            background: rgba(26, 26, 26, 0.8);
            backdrop-filter: blur(10px);
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 100;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            cursor: pointer;
            text-decoration: none;
        }

        .logo-text {
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--accent);
            letter-spacing: -1px;
            text-shadow: 0 0 10px rgba(229, 9, 20, 0.5);
        }

        .logo-text span {
            color: var(--text);
        }

        .search-container {
            position: relative;
            width: 30%;
        }

        .search-input {
            width: 100%;
            padding: 0.8rem 1.2rem;
            padding-left: 3rem;
            border-radius: 25px;
            border: none;
            background: var(--card-bg);
            color: var(--text);
            font-size: 0.9rem;
            transition: all 0.3s;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: var(--inner-shadow);
        }

        .search-input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: var(--inner-shadow), 0 0 15px rgba(229, 9, 20, 0.3);
        }

        .search-icon {
            position: absolute;
            left: 1.2rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
        }

        /* Contenido Principal */
        .main-content {
            padding: 7rem 4% 2rem;
        }

        .section-title {
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            font-weight: 500;
            padding-left: 0.5rem;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
            color: var(--accent);
        }

        /* Grid de Países (solo imagen, tamaño como en la referencia) */
        .countries-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1.5rem;
            padding: 0.5rem;
            margin-bottom: 3rem;
        }

        .country-card {
            background: var(--card-bg);
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
            box-shadow: var(--shadow);
            height: 120px;
            position: relative;
        }

        .country-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4), 0 0 20px rgba(229, 9, 20, 0.4);
        }

        .country-flag {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .country-name {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
            padding: 1rem 0.8rem 0.5rem;
            text-align: center;
            font-weight: 500;
            font-size: 1.1rem;
        }

        /* Grid de Canales (imágenes más pequeñas) */
        .channels-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 1.5rem;
            padding: 0.5rem;
        }

        .channel-card {
            background: var(--card-bg);
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
            box-shadow: var(--shadow);
        }

        .channel-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.4), 0 0 15px rgba(229, 9, 20, 0.3);
        }

        .channel-logo {
            width: 100%;
            height: 100px; /* Imágenes más pequeñas */
            object-fit: cover;
           
                    }

        .channel-name {
            padding: 0.8rem;
            font-size: 0.9rem;
            text-align: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            background: rgba(0, 0, 0, 0.7);
        }

        /* Reproductor completo (centrado) */
        .player-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            z-index: 200;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .player-content {
            width: 85%;
            height: 75%;
            background: var(--card-bg);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5), 0 0 30px rgba(229, 9, 20, 0.3);
            display: flex;
            flex-direction: column;
        }

        .player-header {
            padding: 1rem 1.5rem;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .player-title {
            font-size: 1.2rem;
            font-weight: 500;
        }

        .player-iframe {
            flex: 1;
            border: none;
            position:relative;
            padding-top:30%; 
            width: 100%;
            box-shadow: 0 10px 10px rgba(5, 5, 5, 3.3);
            height: 200%;    }

        .close-player {
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            transition: all 0.3s;
        }

        .close-player:hover {
            background: var(--accent-hover);
            transform: scale(1.1);
        }

        /* Reproductor M3U8 (centrado y por defecto) */
        .m3u8-container {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            background: #000;
        }

        .m3u8-player {
            width: 100%;
            height: 100%;
            max-width: 900px;
        }

        .m3u8-video {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .m3u8-controls {
            position: absolute;
            bottom: 2rem;
            left: 0;
            right: 0;
            display: flex;
            justify-content: center;
            gap: 1rem;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .m3u8-container:hover .m3u8-controls {
            opacity: 1;
        }

        .control-button {
            background: rgba(229, 9, 20, 0.8);
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            transition: all 0.3s;
        }

        .control-button:hover {
            background: var(--accent);
            transform: scale(1.1);
        }

        /* Modal para páginas web */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 300;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            width: 90%;
            height: 80%;
            background: var(--card-bg);
            border-radius: 15px;
            overflow: hidden;
            position: relative;
            transform: scale(0.9);
            transition: transform 0.3s;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5), 0 0 30px rgba(229, 9, 20, 0.3);
        }

        .modal-overlay.active .modal-content {
            transform: scale(1);
        }

        .modal-close {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            background: var(--accent);
            color: white;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            z-index: 10;
            font-size: 1.2rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            transition: all 0.3s;
        }

        .modal-close:hover {
            background: var(--accent-hover);
            transform: scale(1.1);
        }

        .modal-iframe {
            width: 100%;
            height: 100%;
            border: none;
                              
        }
        
    

        /* Resultados de búsqueda */
        .search-results {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--primary);
            z-index: 150;
            padding: 7rem 4% 2rem;
            overflow-y: auto;
        }

        .search-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        /* Estados de visibilidad */
        .hidden {
            display: none;
        }

        /* Botones con neomorfismo */
        .back-button {
            background: var(--card-bg);
            border: none;
            color: var(--text);
            cursor: pointer;
            font-size: 0.9rem;
            padding: 0.7rem 1.2rem;
            border-radius: 25px;
            box-shadow: var(--shadow);
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .back-button:hover {
            box-shadow: var(--inner-shadow);
            transform: translateY(2px);
        }

        /* Footer minimalista */
        .footer {
            text-align: center;
            padding: 2rem 4%;
            color: var(--text-secondary);
            font-size: 0.8rem;
            margin-top: 3rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Protección contra clic derecho */
        .no-context-menu {
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        /* Mensaje de protección */
        .protection-message {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(229, 9, 20, 0.9);
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            font-size: 14px;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 1000;
        }

        /* Responsive */
        @media (max-width: 900px) {
            .search-container {
                width: 50%;
            }
            
            .countries-grid {
                grid-template-columns: repeat(auto-fill, minmax(170px, 1fr));
            }
            
            .channels-grid {
                grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
            }
        }

        @media (max-width: 600px) {
            .header {
                padding: 1rem;
                flex-direction: column;
                gap: 1rem;
            }
            
            .search-container {
                width: 100%;
            }
            
            .logo-text {
                font-size: 1.8rem;
            }
            
            .main-content {
                padding: 8rem 1rem 1rem;
            }
            
            .countries-grid {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
                gap: 1rem;
            }
            
            .country-card {
                height: 100px;
            }
            
            .channels-grid {
                grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
                gap: 1rem;
            }
            
            .channel-logo {
                height: 80px;
            }
        }
    </style>
</head>
<body oncontextmenu="return false;">
    <!-- Pantalla de carga con animación del logo -->
    <div class="loader-container" id="loader">
        <div class="logo-animation">
            <div class="initial">N</div>
            <div class="rest">
                <span>e</span><span>X</span><span>u</span><span>s</span>
            </div>
        </div>
    </div>

    <!-- Mensaje de protección -->
    <div class="protection-message" id="protectionMessage"></div>

    <!-- Header -->
    <div class="header" id="header">
        <a href="#" class="logo" id="logo">
            <div class="logo-text">N<span>eXus</span></div>
        </a>
        <div class="search-container">
            <i class="fas fa-search search-icon"></i>
            <input type="text" class="search-input" placeholder="Buscar canales..." id="searchInput">
        </div>
    </div>

    <!-- Contenido Principal -->
    <div class="main-content" id="mainContent">
        <!-- Sección de Países -->
        <div id="countriesSection">
            <h2 class="section-title">Selecciona un País</h2>
            <div class="countries-grid" id="countriesGrid">
                <!-- Los países se cargarán con JavaScript -->
            </div>
        </div>

        <!-- Sección de Canales (inicialmente oculta) -->
        <div id="channelsSection" class="hidden">
            <div class="section-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                <h2 class="section-title" id="channelsTitle">Canales de </h2>
                <button class="back-button" onclick="showCountries()">
                    <i class="fas fa-arrow-left"></i> Volver
                </button>
            </div>
            <div class="channels-grid" id="channelsGrid">
                <!-- Los canales se cargarán con JavaScript -->
            </div>
        </div>
    </div>

    <!-- Reproductor (inicialmente oculto) -->
    <div id="player" class="player-container hidden">
        <div class="player-content">
            <div class="player-header">
                <div class="player-title" id="playerTitle">Reproduciendo</div>
                <button class="close-player" onclick="closePlayer()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div id="playerMedia">
                <!-- El contenido del reproductor se cargará dinámicamente -->
            </div>
        </div>
    </div>
    
    

    <!-- Modal para páginas web (inicialmente oculto) -->
    <div id="webModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-close" onclick="closeWebModal()">
                <i class="fas fa-times"></i>
            </div>
            <iframe id="webModalIframe" class="modal-iframe"></iframe>
        </div>
    </div>

    <!-- Resultados de Búsqueda (inicialmente ocultos) -->
    <div id="searchResults" class="search-results hidden">
        <div class="search-header">
            <h2 class="section-title">Resultados de búsqueda</h2>
            <button class="back-button" onclick="closeSearch()">
                <i class="fas fa-times"></i> Cerrar
            </button>
        </div>
        <div class="channels-grid" id="searchResultsGrid">
            <!-- Los resultados de búsqueda se cargarán con JavaScript -->
        </div>
    </div>

    <!-- Footer -->
    <div class="footer">
        <p>© 2023 NeXus - Todos los derechos reservados</p>
        <a href="https://m.facebook.com/ig/login_via/app/?locale=es_LA&lid=1CoMWf47unfYPuFZs&bn=Y29tLmFuZHJvaWQuY2hyb21l&tade=Q7fLBQGRqJasScyCZ4sCT05mprraq7kaDQTt9Y9X%2BH%2FJvGvyZkBgD1j0vsyohDkVNlROVk8Q%2BN%2BA92K08CbqtZxj%2BO6ISW8QDXwF1ZqZlv0OjLubF21zmihUsn5LKfbJZtimiQ%2BO7w%3D%3D">Facebook</a>
    </div>

    <script>
        // Datos de ejemplo para países y canales
        const countries = [
            {
                id: 1,
                name: "Honduras",
                flag: "https://flagcdn.com/w320/hn.png",
                channels: [1, 2, 3, 4, 5, 6]
            },
            {
                id: 2,
                name: "México",
                flag: "https://flagcdn.com/w320/mx.png",
                channels: []
            },
            {
                id: 3,
                name: "Estados Unidos",
                flag: "https://flagcdn.com/w320/us.png",
                channels: [7, 8, 9]
            },
            {
                id: 4,
                name: "España",
                flag: "https://flagcdn.com/w320/es.png",
                channels: [10, 11, 12]
            },
            {
                id: 5,
                name: "Colombia",
                flag: "https://flagcdn.com/w320/co.png",
                channels: [13, 14, 15]
            },
            {
                id: 6,
                name: "Argentina",
                flag: "https://flagcdn.com/w320/ar.png",
                channels: [16, 17, 18]
            }
        ];

        const channels = [
            {
                id: 1,
                name: "CANAL 5 EL LIDER",
                logo: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSI3p1OHRPI2BhG99By8UEudcyveQGAZXiaP4j4YrJFbQ&s=10",
                country: "Honduras",
                type: "website",
                source: "https://www.televicentro.com/envivo/d829deb7-e5bd-4688-aa79-3ecb75461d72"
            },
            {
                id: 2,
                name: "TELECADENA",
                logo: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTFA8R5I3q3aJV-7b40q0-jLrC6FbIvUJzrBnWW28qkdA&s=10",
                country: "Honduras",
                type: "website",
                source: ""
            },
            {
                id: 3,
                name: "TSI",
                logo: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRnzU1bO5QS_-xZk25jpfGKb7Z7eORIlW7fv9DRqdzsCg&s=10",
                country: "Honduras",
                type: "website",
                source: "https://www.televicentro.com/envivo/a2a06911-bcef-4f1e-a952-66b2b2f411c4"
            },
            
             {
                id: 4,
                name: "CANAL 10",
                logo: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQpDGlXC04QvxP1Y__Sas5hW2iXoSDiPwCdcP1AuKneTQ&s=10",
                country: "Honduras",
                type: "iframe",
                source: "https://geo.dailymotion.com/player.html?video=x8uk5ou"
            },
            
            
            
            {
                id: 5,
                name: "CANAL 8",
                logo: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQpDGlXC04QvxP1Y__Sas5hW2iXoSDiPwCdcP1AuKneTQ&s=10",
                country: "Honduras",
                type: "iframe",
                source: "https://tnh.gob.hn/en-vivo/"
            },,
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            {
                id:4 ,
                name: "Las Estrellas",
                logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/5c/Las_Estrellas_2016.svg/1280px-Las_Estrellas_2016.svg.png",
                country: "México",
                type: "m3u8",
                source: "https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8"
            },
            {
                id:5 ,
                name: "Canal 5",
                logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/5f/Canal_5_%28Mexico%29_-2019.png/1280px-Canal_5_%28Mexico%29_-2019.png",
                country: "México",
                type: "m3u8",
                source: "https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8"
            },
            {
                id: 6,
                name: "Azteca 7",
                logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/5f/Azteca_7_2019.png/1280px-Azteca_7_2019.png",
                country: "México",
                type: "m3u8",
                source: "https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8"
            },
            {
                id: 7,
                name: "CNN",
                logo: "https://logos-world.net/wp-content/uploads/2020/11/CNN-Logo.png",
                country: "Estados Unidos",
                type: "m3u8",
                source: "https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8"
            },
            {
                id: 8,
                name: "ESPN",
                logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/2/2f/ESPN_wordmark.svg/1280px-ESPN_wordmark.svg.png",
                country: "Estados Unidos",
                type: "m3u8",
                source: "https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8"
            },
            {
                id: 9,
                name: "HBO",
                logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/d/de/HBO_logo.svg/1280px-HBO_logo.svg.png",
                country: "Estados Unidos",
                type: "website",
                source: "https://www.hbo.com"
            }
        ];

        // Elementos DOM
        const loader = document.getElementById('loader');
        const header = document.getElementById('header');
        const countriesSection = document.getElementById('countriesSection');
        const channelsSection = document.getElementById('channelsSection');
        const countriesGrid = document.getElementById('countriesGrid');
        const channelsGrid = document.getElementById('channelsGrid');
        const channelsTitle = document.getElementById('channelsTitle');
        const player = document.getElementById('player');
        const playerTitle = document.getElementById('playerTitle');
        const playerMedia = document.getElementById('playerMedia');
        const searchInput = document.getElementById('searchInput');
        const searchResults = document.getElementById('searchResults');
        const searchResultsGrid = document.getElementById('searchResultsGrid');
        const webModal = document.getElementById('webModal');
        const webModalIframe = document.getElementById('webModalIframe');
        const logo = document.getElementById('logo');
        const protectionMessage = document.getElementById('protectionMessage');

        // Protección contra copia/pega y selección de texto
        document.addEventListener('copy', function(e) {
            e.preventDefault();
            showProtectionMessage('La copia de contenido está deshabilitada');
        });

        document.addEventListener('cut', function(e) {
            e.preventDefault();
            showProtectionMessage('El corte de contenido está deshabilitado');
        });

        document.addEventListener('paste', function(e) {
            e.preventDefault();
            showProtectionMessage('El pegado de contenido está deshabilitado');
        });

        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
            showProtectionMessage('El menú contextual está deshabilitado');
        });

        document.addEventListener('selectstart', function(e) {
            e.preventDefault();
            showProtectionMessage('La selección de texto está deshabilitada');
        });

        document.addEventListener('dragstart', function(e) {
            e.preventDefault();
        });

        // Mostrar mensaje de protección
        function showProtectionMessage(message) {
            protectionMessage.textContent = message;
            protectionMessage.style.opacity = '1';
            
            setTimeout(function() {
                protectionMessage.style.opacity = '0';
            }, 2000);
        }

        // Ocultar pantalla de carga después de la animación
        setTimeout(() => {
            loader.style.opacity = '0';
            setTimeout(() => {
                loader.classList.add('hidden');
            }, 500);
        }, 2000);

        // Cargar países en el grid
        function loadCountries() {
            countriesGrid.innerHTML = '';
            countries.forEach(country => {
                const countryCard = document.createElement('div');
                countryCard.className = 'country-card';
                countryCard.innerHTML = `
                    <img src="${country.flag}" alt="${country.name}" class="country-flag">
                    <div class="country-name">${country.name}</div>
                `;
                countryCard.addEventListener('click', () => {
                    showChannels(country.name);
                });
                
                countriesGrid.appendChild(countryCard);
            });
        }

        // Mostrar canales de un país
        function showChannels(countryName) {
            // Ocultar países y mostrar canales
            countriesSection.classList.add('hidden');
            channelsSection.classList.remove('hidden');
            
            // Actualizar título
            channelsTitle.textContent = `Canales de ${countryName}`;
            
            // Filtrar canales por país
            const countryChannels = channels.filter(channel => channel.country === countryName);
            
            // Cargar canales
            channelsGrid.innerHTML = '';
            countryChannels.forEach(channel => {
                const channelCard = document.createElement('div');
                channelCard.className = 'channel-card';
                channelCard.innerHTML = `
                    <img src="${channel.logo}" alt="${channel.name}" class="channel-logo">
                    <div class="channel-name">${channel.name}</div>
                `;
                channelCard.addEventListener('click', () => {
                    playChannel(channel);
                });
                channelsGrid.appendChild(channelCard);
            });
        }

        // Volver a mostrar países
        function showCountries() {
            channelsSection.classList.add('hidden');
            searchResults.classList.add('hidden');
            countriesSection.classList.remove('hidden');
        }

        // Reproducir canal (M3U8 por defecto)
        function playChannel(channel) {
            playerTitle.textContent = channel.name;
            
            if (channel.type === 'iframe') {
                playerMedia.innerHTML = `
                    <iframe class="player-iframe" src="${channel.source}" allowfullscreen></iframe>
                `;
                player.classList.remove('hidden');
            } else if (channel.type === 'website') {
                // Abrir página web en modal
                webModalIframe.src = channel.source;
                webModal.classList.add('active');
            } else if (channel.type === 'm3u8') {
                // Reproductor para M3U8 (por defecto)
                playerMedia.innerHTML = `
                    <div class="m3u8-container">
                        <div class="m3u8-player">
                            <video id="m3u8Video" class="m3u8-video" controls></video>
                        </div>
                        <div class="m3u8-controls">
                            <button class="control-button" onclick="playM3U8('${channel.source}')">
                                <i class="fas fa-play"></i>
                            </button>
                        </div>
                    </div>
                `;
                player.classList.remove('hidden');
                // Auto-reproducir
                setTimeout(() => playM3U8(channel.source), 500);
            }
        }

        // Reproducir stream M3U8
        function playM3U8(url) {
            if (Hls.isSupported()) {
                const video = document.getElementById('m3u8Video');
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(video);
                hls.on(Hls.Events.MANIFEST_PARSED, function() {
                    video.play();
                });
            } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
                video.src = url;
                video.addEventListener('loadedmetadata', function() {
                    video.play();
                });
            }
        }

        // Cerrar reproductor
        function closePlayer() {
            player.classList.add('hidden');
            playerMedia.innerHTML = '';
            
            // Detener cualquier video en reproducción
            const video = document.getElementById('m3u8Video');
            if (video) {
                video.pause();
                video.src = '';
            }
        }

        // Cerrar modal web
        function closeWebModal() {
            webModal.classList.remove('active');
            webModalIframe.src = '';
        }

        // Buscar canales
        searchInput.addEventListener('input', () => {
            const searchTerm = searchInput.value.toLowerCase().trim();
            
            if (searchTerm.length > 2) {
                // Ocultar todo y mostrar resultados de búsqueda
                countriesSection.classList.add('hidden');
                channelsSection.classList.add('hidden');
                searchResults.classList.remove('hidden');
                
                // Filtrar canales
                const filteredChannels = channels.filter(channel => 
                    channel.name.toLowerCase().includes(searchTerm) || 
                    channel.country.toLowerCase().includes(searchTerm)
                );
                
                // Mostrar resultados
                searchResultsGrid.innerHTML = '';
                if (filteredChannels.length > 0) {
                    filteredChannels.forEach(channel => {
                        const channelCard = document.createElement('div');
                        channelCard.className = 'channel-card';
                        channelCard.innerHTML = `
                            <img src="${channel.logo}" alt="${channel.name}" class="channel-logo">
                            <div class="channel-name">${channel.name}</div>
                        `;
                        channelCard.addEventListener('click', () => {
                            playChannel(channel);
                        });
                        searchResultsGrid.appendChild(channelCard);
                    });
                } else {
                    searchResultsGrid.innerHTML = `
                        <div style="grid-column: 1 / -1; text-align: center; padding: 2rem;">
                            <i class="fas fa-search" style="font-size: 2rem; color: var(--text-secondary); margin-bottom: 1rem;"></i>
                            <h3>No se encontraron resultados</h3>
                        </div>
                    `;
                }
            } else if (searchTerm.length === 0) {
                // Si la búsqueda está vacía, volver a la vista normal
                closeSearch();
            }
        });

        // Cerrar búsqueda
        function closeSearch() {
            searchResults.classList.add('hidden');
            searchInput.value = '';
            
            // Mostrar la sección correspondiente
            if (!channelsSection.classList.contains('hidden')) {
                // Si estábamos viendo canales, mantenerlos visibles
                channelsSection.classList.remove('hidden');
            } else {
                // Si no, mostrar países
                countriesSection.classList.remove('hidden');
            }
        }

        // Volver al inicio al hacer clic en el logo
        logo.addEventListener('click', (e) => {
            e.preventDefault();
            closeSearch();
            showCountries();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Cerrar reproductor con la tecla Escape
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closePlayer();
                closeWebModal();
            }
        });

        // Inicializar la página
        document.addEventListener('DOMContentLoaded', () => {
            loadCountries();
        });
    </script>
    <!-- Biblioteca HLS.js para reproducir streams M3U8 -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@1.0.0/dist/hls.min.js"></script>
</body>
</html>